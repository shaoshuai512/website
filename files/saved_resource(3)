M.add("mt-formchecker",function(e){function t(){t.superclass.constructor.apply(this,arguments)}var i=e.Node,s=e.io,a=e.Object,n=e.Lang.isFunction,r=e.Lang.isString,o=e.Lang.trim,c=e.mt.util,l={old:{fieldGroup:"field-group",highlightGroup:"field-group--highlight",type:"field-group--type",ok:"field-group--ok",error:"field-group--error"},"new":{fieldGroup:"form-field",highlightGroup:"form-field--highlight",type:"form-field--type",ok:"form-field--ok",error:"form-field--error"}},u=".",d="FormChecker: ",f=200,h="success",p="failure";t.NAME="formChecker",t.STATUS_INIT=0,t.STATUS_CHECKING=1,t.STATUS_OK=2,t.STATUS_ERROR=3,t.CLASS_INLINE_TIP="inline-tip",t.CLASS_BLOCK_TIP="block-tip",t.CHECK_EMPTY_FN=function(e){return""===o(e.get("value"))},t.ATTRS={form:{value:null,setter:"_setForm",writeOnce:!0},fields:{value:null},checkEvent:{value:"submit",writeOnce:!0},tipClass:{value:t.CLASS_INLINE_TIP,writeOnce:!0},showOkTip:{value:!1,writeOnce:!0},highlightGroup:{value:!1,writeOnce:!0},async:{value:!1,writeOnce:!0}};var T={initializer:function(){var e,t=this,i=t.get("form"),s=t.get("fields"),a=t.get("async");if(!i)throw new Error(d+"必须设置form参数");if(!s)throw new Error(d+"必须设置fields参数");t.className=i.one(u+l.old.fieldGroup)?l.old:l["new"],t.publish(h,{emitFacade:!0,defaultFn:t._defSuccessFn}),t.publish(p,{emitFacade:!0,defaultFn:t._defFailureFn}),e={emitFacade:!0},a&&(e.defaultFn=function(){i.submit()}),t.publish("submitSuccess",e),t.publish("submitFailure",{emitFacade:!0}),t.on("fieldsChange",function(){t._buildFields()}),t._handles={},t._buildFields(),t._bind()},destructor:function(){c.detachHandle(this._handles)},_bind:function(){function t(t){s.check()?(s.fire("submitSuccess"),e.Global.fire("formChecker:submitSuccess",{instance:s})):(t.halt(!0),s.fire("submitFailure"))}function i(e){e.halt(),s._isCheckingAsync||(s._isCheckingAsync=!0,s.checkAsync(function(e){s._isCheckingAsync=!1,window.setTimeout(function(){s.fire(e?"submitFailure":"submitSuccess")},0)}))}var s=this,a=s._handles,n=s.get("form"),r=s.get("async"),o=r?i:t;a.submit=n.on("submit",o),a.focus=n.delegate("focus",function(){var e=s._getFieldByNode(this);e&&s.focusField(e,!0)},"input, textarea, select"),a.blur=n.delegate("blur",function(){var e=s._getFieldByNode(this);e&&s.blurField(e,!0)},"input, textarea, select"),e.Global.on("formChecker:valueChange",function(e){var t=s._getFieldByNode(e.node);t&&s.blurField(t,!0)}),a.success=s.on(h,function(e){s._updateUncheckedFields&&s._updateUncheckedFields(e.field.name)}),a.failure=s.on(p,function(e){s._updateUncheckedFields&&s._updateUncheckedFields(e.field.name,!0)})},checkField:function(e){function t(e,t,i){var s={field:t};e===p&&i&&(s.error=i),a.fire(e,s)}var i,a=this,n=e.node,r=e._async;e.validateReg?i=!e.validateReg.test(n.get("value")):e.validateFn&&(i=e.validateFn.call(n,n)),i?t(p,e,i):e.validateAjax?(r&&r.isInProgress()&&r.abort(),r=s(e.validateAjax.action,{method:"POST",data:c.toPostData(e.validateAjax.dataFn()),on:{success:function(i,s){var a=c.getEvalRes(s);a.status?t(h,e):t(p,e,a.msg)},failure:function(i,s){s.statusText&&"abort"===s.statusText||t(p,e,"网络有问题，请稍后重试")}}}),r.isInProgress()&&a._processType(e,"检查中..."),e._async=r):t(h,e)},check:function(){var e=this,i=e.get("fields"),s=!1;return a.each(i,function(i){(i.status===t.STATUS_INIT||i.status===t.STATUS_CHECKING)&&e.checkField(i),i.status===t.STATUS_ERROR&&(s=!0)}),!s},checkAsync:function(e){var i=this,s=i.get("fields"),n={},r=!1;return a.each(s,function(e,i){(e.status===t.STATUS_INIT||e.status===t.STATUS_CHECKING)&&(n[i]=!0),e.status===t.STATUS_ERROR&&(r=!0)}),a.isEmpty(n)?void e(r):(i._updateUncheckedFields=function(t,s){n.hasOwnProperty(t)&&(delete n[t],s&&(r=!0),a.isEmpty(n)&&(i._updateUncheckedFields=null,e(r)))},void a.each(n,function(e,t){i.checkField(s[t])}))},focusField:function(e,t){var i=this,s=e.node,a=e.groupNode,n=i.get("highlightGroup");t||s.focus(),s.test("input[type=text], input[type=password], textarea")&&n&&a.addClass(i.className.highlightGroup),i._processType(e)},blurField:function(e,t){var i=this,s=e.node,a=i.get("highlightGroup"),n=i.get("checkEvent");t||s.blur(),a&&e.groupNode.removeClass(i.className.highlightGroup),"blur"===n?window.setTimeout(function(){i.checkField(e)},f):i.clearTip(e)},_processType:function(e,i){e.status=t.STATUS_CHECKING,i=i||e.typeTip,""===i?this.clearTip(e):this._setTip(e,this.className.type,i)},_defSuccessFn:function(e,i){var s=e.field,a=s.showOkTip;s.status=t.STATUS_OK,a?this._setTip(s,this.className.ok,i||s.okTip):this.clearTip(s)},_defFailureFn:function(e){var i=e.field,s=e.error;i.status=t.STATUS_ERROR,s===!0&&(s=i.errorTip),this._setTip(i,this.className.error,s||i.errorTip)},_setTip:function(e,t,s){var a,n,o=this,c=o.get("fields"),d=o.get("tipClass"),f=o.className;if(r(e)&&(e=c[e]),a=e.groupNode,n=a.one(u+d),n||(n=i.create('<span class="'+d+'"></span>'),a.append(n)),f===l["new"])switch(t){case f.type:s='<i class="tip-status"></i>'+s;break;case f.ok:s='<i class="tip-status tip-status--success"></i>'+s;break;case f.error:s='<i class="tip-status tip-status--opinfo"></i>'+s}o.replaceGroupClass(e,t),n.setHTML(s).show()},setOkTip:function(e,t){this._setTip(e,this.className.ok,t)},setErrorTip:function(e,t){this._setTip(e,this.className.error,t)},setTypeTip:function(e,t){this._setTip(e,this.className.type,t)},clearTip:function(e){var t,i,s=this,a=s.get("fields");r(e)&&(e=a[e]),t=e.groupNode,i=t.one(u+s.get("tipClass")),i&&i.setHTML("").hide(),s.replaceGroupClass(e)},replaceGroupClass:function(t,i){var s=t.groupNode,a=this.className;e.Array.each([a.type,a.ok,a.error],function(e){s.removeClass(e)}),i&&s.addClass(i)},_getFieldByNode:function(e){var t=this.get("fields"),i=null;return a.some(t,function(t){return t.node===e?(i=t,!0):void 0}),i},addField:function(i,s){var a=this,r=a.get("fields"),o=a.get("showOkTip"),c=e.one(s.node),l=c&&c.ancestor(u+a.className.fieldGroup);return c&&l?(e.mix(s,{name:i,node:c,groupNode:l,status:t.STATUS_INIT,showOkTip:s.hasOwnProperty("showOkTip")?s.showOkTip:o},!0),s.validateAjax&&!n(s.validateAjax.dataFn)&&(s.validateAjax.dataFn=function(){var e={};return e[c.get("name")]=c.get("value"),e}),r[i]=s,!0):!1},addFields:function(e){var t,i=this,s=!0;for(t in e)e.hasOwnProperty(t)&&(s=i.addField(t,e[t])&&s);return s},removeField:function(e){var t=this,i=t.get("fields"),s=r(e)?e:e.name;return i.hasOwnProperty(s)?(delete i[s],!0):!1},resetAllFields:function(){var t=this,i=t.get("fields");e.Object.each(i,function(e){t.resetField(e)})},resetField:function(e){var i=this,s=i.get("fields");r(e)&&(e=s[e]),e.status=t.STATUS_INIT,i.clearTip(e)},_buildFields:function(){var e=this,t=e.get("fields");a.each(t,function(i,s){var a=e.addField(s,i);a||delete t[s]})},_setForm:function(t){return e.one(t)}};e.extend(t,e.Base,T),e.mt.FormChecker=t},"1.0.0",{requires:["mt-base","io-base","base-base","node"]});
M.add("mt-form",function(e){e.namespace("mt.form");var t=e.mt.util,n=e.Lang.isString,i=e.mt.lang,r=e.Lang.trim,a=e.Lang.isNumber,o=e.Lang.isArray,s=e.Lang.isObject,c=e.Object.isEmpty,u=e.mt.macro,l=encodeURIComponent,f=e.io,d={_setValue:function(e,t,n){var i=e.all('[name="'+t+'"]'),a=this;n=r(n),i.each(function(e){var t=e.get("type"),i=e.get("value");switch(t){case"select-one":a._setSelectValue(e,n);break;case"radio":case"checkbox":a._matchValue(i,n)&&e.set("checked","checked");break;default:e.set("value",n)}})},_getValue:function(t,n,i){var a,o=t.all('[name="'+n+'"]'),s=[],c=this;return o.each(function(e){var t=e.get("type");if(c._checkType(t))switch(t){case"select-one":a=e.get("value"),s.push(a);break;case"select-multiple":e.get("options").each(function(e){e.get("selected")&&(a=e.get("value")||e.get("text"),s.push(a))});break;case"radio":case"checkbox":e.get("checked")&&(a=e.get("value"),s.push(a));break;default:a=e.get("value"),void 0!==a&&s.push(a)}}),e.Array.each(s,function(e,t){e=r(e),i&&(s[t]=l(e))}),s},field:function(e,t,n){var i,r,a;if(this._checkValue(n))return this._setValue(e,t,n);if((i=e.one('[name="'+t+'"]'))&&(r=i.get("type"),this._checkType(r)))switch(a=this._getValue(e,t),r){case"select-multiple":case"checkbox":return a;default:if(0===a.length)return;return 1===a.length?a[0]:a}},_matchValue:function(e,t,n){return n=n||",",o(t)||(t=t.toString().split(n)),i.inArray(e,t,!1)},_setSelectValue:function(e,t){var n=!1,i=this;return e.get("options").some(function(e){return i._matchValue(e.get("value"),t)?(e.set("selected","selected"),n=!0,!0):void 0}),n},_getFieldsByNames:function(t,i){var r=[];return i?(o(i)?e.Array.each(i,function(e){r.push('[name="'+e+'"]')}):n(i)&&r.push('[name="'+i+'"]'),t.all(r.join(","))):null},_checkValue:function(e){return"undefined"!==e&&(o(e)||n(e)||a(e))},_checkType:function(e){switch(e){case"file":case void 0:case"reset":case"button":return!1;default:return!0}}};e.mt.form={toObject:function(t,n,i,r,a,o){t=e.one(t),i!==!1&&(i=!0);var s=d._getFieldsByNames(t,n);return this._serialize(t,s,o,i,r,a).formObj},toString:function(t,n,i,r,a){t=e.one(t);var o=d._getFieldsByNames(t,n);return this._serialize(t,o,a,i,r).formStr},toJSON:function(t,n,i,r){if(t=e.one(t)){"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=",");var a=this._serialize(t,null,n,i).formObj,s={},c=this;return e.Object.each(a,function(e,t){r&&o(e)&&(e=e.join(r)),c._parseArr(s,t,e)}),s}},field:function(t,n,i){return(t=e.one(t))?d.field(t,n,i):void 0},setOptions:function(t,n,i,r){var a=r?r.one(t):e.one(t),s=this,u=n.data;if(a){a.empty();var l=e.Node.getDOMNode(a).options;if(i&&l.add(this._buildOption("",i)),o(u)){var f=n.key||n.keyField||"keyField",d=n.value||n.valueField||"valueField";e.Array.each(u,function(e){l.add(s._buildOption(e[f],e[d]))})}else if(!c(u))for(var h in u)u.hasOwnProperty(h)&&l.add(this._buildOption(h,u[h]))}},_buildOption:function(e,t){return new Option(t,e)},getCheckedBoxesAttr:function(t,n,i){n=n||"value",t=t||"input[type=checkbox]";var r=i?e.one(i).all(t):e.all(t),a=[];return r.each(function(e){"checkbox"===e.get("type")&&e.get("checked")&&a.push(e.get(n)||e.getAttribute(n))}),a},getRadioAttr:function(t,n,i){n=n||"value",t=t||'input[type="radio"]';var a=i?e.one(i).all(t):e.all(t),o="";return a.some(function(e){return"radio"===e.get("type")&&e.get("checked")?(o=r(e.get(n))||e.getAttribute(n),!0):void 0}),o},getOptionsText:function(e,t){if(!e)return null;var n=e.one('select[name="'+t+'"]');if(!n)return null;var i;return n.get("options").some(function(e){return e.get("selected")?(i=e.getHTML()||"",!0):void 0}),i},toggleCheckbox:function(t,n,i){t=e.one(t),t&&t.on("click",function(){var r=i?e.one(i).all(n):e.all(n);t.get("checked")?r.set("checked","checked"):r.set("checked",!1)})},stopEnterSubmit:function(e){e.delegate("keydown",function(e){e.keyCode===u.key.ENTER&&e.halt()},"input[type]")},multiAction:function(t,n){function i(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i.selector)}return t.join(",")}if(t=e.one(t),t&&n&&e.Lang.isArray(n)&&0!==n.length){var r=i(n);t.delegate("click",function(){for(var e=0;e<n.length;e++){var i=n[e];if(this.test(i.selector))return t.set("action",i.action),void(i.callback&&"function"==typeof i.callback&&i.callback(t,this))}},r)}},AjaxForm:function(t,n){var i=this;if(t=e.one(t)){var a=t.get("action")||n.action,o=n.method||t.get("method")||"POST",s=n.buttonPost?e.one(n.buttonPost):t,c=n.buttonPost?"click":"submit",u=n.multiAction;if(!t.test("form"))throw new Error("请保证你所提交的对象是一个form");if(""===r(a))throw new Error("表单提交地址(action)不能为空");if(u){var l=this._getMultiTriggers(u);t.delegate("click",function(e){e.halt(),i.sendRequest2ActionByTrigger(this,n,o,t)},l)}else s.on(c,function(e){e.halt(),n.beforeAjax?n.beforeAjax()&&i.sendRequest(a,o,n,t):i.sendRequest(a,o,n,t)})}},_getMultiTriggers:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.join(",")},sendRequest2ActionByTrigger:function(e,t,n,i){var r,a=this,o=t.beforeAjaxs,s=t.multiAction;for(var c in s)s.hasOwnProperty(c)&&e.test(c)&&(r=s[c],o&&o[c]?o[c](e)&&a.sendRequest(r,n,t,i):a.sendRequest(r,n,t,i))},sendRequest:function(n,i,r,a){f(n,{method:i,data:e.mt.util.toPostData(r.query||{}),on:{success:function(n,i){var a=t.getEvalRes(i,"权限不够或者网络有问题，请稍后重试。");a.status?r.handleSuccess&&r.handleSuccess(a):r.handleFail?r.handleFail(a):e.config.win.alert(a.msg)},failure:function(){e.config.win.alert("权限不够或者网络有问题，请稍后重试。")}},form:{id:a.get("id")}})},clear:function(t,n,r){if(t=e.one(t)){var a=["hidden","text","number","email","url","search"];t.all("input,select,textarea").each(function(e){var t=e.get("type"),o=e.get("nodeName").toLowerCase();if(i.inArray(t,a)||"textarea"===o){if(r&&e.test(r))return;e.set("value","")}else n||("checkbox"===t||"radio"===t?e.set("checked",!1):"select"===o&&e.set("selectedIndex",-1))})}},reset:function(t){t=e.one(t),t&&"form"===t.get("nodeName").toLowerCase()&&t.reset()},_nestedObject2Flat:function(t){function n(t,n,i){e.Object.each(n,function(e,n){var a=i?i+"."+n:n;r(t,e,a)})}function i(t,n,i){e.Array.each(n,function(e,n){var a=i+"["+n+"]";r(t,e,a)})}function r(e,t,r){o(t)?i(e,t,r):s(t)?n(e,t,r):e[r]=t}if(!s(t))return t;var a={};return n(a,t),a},fillForm:function(t,n){var i=e.one(t);if(!i||!n)return!1;if(!e.Object.isEmpty(n)){n=this._nestedObject2Flat(n);for(var r in n)n.hasOwnProperty(r)&&this.field(i,r,n[r])}return!0},serialize:function(t,n,i,r){return t instanceof e.Node||(t=e.one("#"+t)),this._serialize(t,null,n,i,r).formStr},_serialize:function(t,n,i,r,a,o){r!==!1&&(r=!0),void 0!==a&&e.Lang.isString(a)||(a="&");var s,c,u={},l=[],f={};return n=n||t.all("input, select, textarea"),n.each(function(n){if(s=n.get("name"),(!n.get("disabled")||i)&&s){if(f[s])return;c=d._getValue(t,s,r),0!==c.length&&(o?(c=c.join(o),l.push(s+"="+c)):e.Array.each(c,function(e){l.push(s+"="+e)}),1===c.length&&(c=c[0]),u[s]=c),f[s]=!0}}),{formStr:l.join(a),formObj:u}},disableSubmit:function(t,n,i){var r={},a={"background-color":"#EEE"},o="";if(t=e.one(t),i=i||{},n||e.mix(i,a),n=n?n:"disabled",t){r.className=n,r.styles="",o=e.Node.getDOMNode(t).getAttribute("style"),r.styles="string"==typeof o?o:o=o?o.cssText:"",t.setData("backupStyles",r),t.setAttribute("disabled","disabled"),t.addClass(n);for(var s in i)i.hasOwnProperty(s)&&(o+=";"+s+":"+i[s]);t.removeAttribute("style"),t.setAttribute("style",o),t._node.style.cssText=o}},enableSubmit:function(t){var n=null;t=e.one(t),t&&(t.removeAttribute("disabled"),n=t.getData("backupStyles"),n&&(t.removeClass(n.className),t.removeAttribute("style"),t.setAttribute("style",n.styles),t._node.style.cssText=n.styles))},_execStr:function(e){for(var t,n=/([\w\u4e00-\u9fa5]+)(["']?)(\]?)(\[?)(["']?)/g,i=[];null!==(t=n.exec(e));)i.push(t),t[3]&&(n.lastIndex=n.lastIndex-t[3].length);return i},_parseArr:function(t,n,i){var r=t;n=n.replace(/\.([\w\u4e00-\u9fa5]+)/g,'["$1"]');var a=this._execStr(n);e.Array.each(a,function(e){var t=e[1],n=/^\s*$/;n.test(t)&&(t=0),void 0===r[t]&&(r[t]=e[4]&&e[5]?{}:e[4]?[]:i||""),r=r[t]})}}},"1.0.0",{requires:["mt-base","io-base","node"]});
/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-complex",function(e,t){var n=e.Attribute;n.Complex=function(){},n.Complex.prototype={_normAttrVals:n.prototype._normAttrVals,_getAttrInitVal:n.prototype._getAttrInitVal},e.AttributeComplex=n.Complex},"3.12.0",{requires:["attribute-base"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"3.12.0",{requires:["base-base","pluginhost"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("classnamemanager",function(e,t){var n="classNamePrefix",r="classNameDelimiter",i=e.config;i[n]=i[n]||"yui3",i[r]=i[r]||"-",e.ClassNameManager=function(){var t=i[n],s=i[r];return{getClassName:e.cached(function(){var n=e.Array(arguments);return n[n.length-1]!==!0?n.unshift(t):n.pop(),n.join(s)})}}()},"3.12.0",{requires:["yui-base"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={value:null,setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n))},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),t&&(n&&t.empty(),t.remove(P)),r||(n&&e.empty(),e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this.get(k),t)},getString:function(e){return this
.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"3.12.0",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,i=e.Lang,s="srcNode",o="contentBox";n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS[s]={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get(o)},_preAddAttrs:function(e,t,n){var r={id:e.id,boundingBox:e.boundingBox,contentBox:e.contentBox,srcNode:e.srcNode};this.addAttrs(r,t,n),delete e.boundingBox,delete e.contentBox,delete e.srcNode,delete e.id,this._applyParser&&this._applyParser(t)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n=this,r=this._getNodeToParse(),s=n._getHtmlParser(),o,u;s&&r&&e.Object.each(s,function(e,t,s){u=null,i.isFunction(e)?u=e.call(n,r):i.isArray(e)?(u=r.all(e[0]),u.isEmpty()&&(u=null)):u=r.one(e),u!==null&&u!==undefined&&(o=o||{},o[t]=u)}),t=n._applyParsedConfig(r,t,o)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t=this._getClasses(),n={},r,i;for(r=t.length-1;r>=0;r--)i=t[r].HTML_PARSER,i&&e.mix(n,i,!0);return n}})},"3.12.0",{requires:["widget-base"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-skin",function(e,t){var n="boundingBox",r="contentBox",i="skin",s=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(e){var t=this.get(r)||this.get(n),o,u;return e=e||s(i,""),u=new RegExp("\\b"+e+"(\\S+)"),t&&t.ancestor(function(e){return o=e.get("className").match(u),o}),o?o[1]:null}},"3.12.0",{requires:["widget-base"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-uievents",function(e,t){var n="boundingBox",r=e.Widget,i="render",s=e.Lang,o=":",u=e.Widget._uievts=e.Widget._uievts||{};e.mix(r.prototype,{_destroyUIEvents:function(){var t=e.stamp(this,!0);e.each(u,function(n,r){n.instances[t]&&(delete n.instances[t],e.Object.isEmpty(n.instances)&&(n.handle.detach(),u[r]&&delete u[r]))})},UI_EVENTS:e.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(n)},_createUIEvent:function(t){var n=this._getUIEventNode(),i=e.stamp(n)+t,s=u[i],o;s||(o=n.delegate(t,function(e){var t=r.getByNode(this);t&&t._filterUIEvent(e)&&t.fire(e.type,{domEvent:e})},"."+e.Widget.getClassName()),u[i]=s={instances:{},handle:o}),s.instances[e.stamp(this)]=1},_filterUIEvent:function(e){return e.currentTarget.compareTo(e.container)||e.container.compareTo(this._getUIEventNode())},_getUIEvent:function(e){if(s.isString(e)){var t=this.parseType(e)[1],n,r;return t&&(n=t.indexOf(o),n>-1&&(t=t.substring(n+o.length)),this.UI_EVENTS[t]&&(r=t)),r}},_initUIEvent:function(e){var t=this._getUIEvent(e),n=this._uiEvtsInitQueue||{};t&&!n[t]&&(this._uiEvtsInitQueue=n[t]=1,this.after(i,function(){this._createUIEvent(t),delete this._uiEvtsInitQueue[t]}))},on:function(e){return this._initUIEvent(e),r.superclass.on.apply(this,arguments)},publish:function(e,t){var n=this._getUIEvent(e);return n&&t&&t.defaultFn&&this._initUIEvent(n),r.superclass.publish.apply(this,arguments)}},!0)},"3.12.0",{requires:["node-event-delegate","widget-base"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-build",function(e,t){function f(e,t,n){n[e]&&(t[e]=(t[e]||[]).concat(n[e]))}function l(e,t,n){n._ATTR_CFG&&(t._ATTR_CFG_HASH=null,f.apply(null,arguments))}function c(e,t,r){n.modifyAttrs(t,r.ATTRS)}var n=e.BaseCore,r=e.Base,i=e.Lang,s="initializer",o="destructor",u=["_PLUG","_UNPLUG"],a;r._build=function(t,n,i,u,a,f){var l=r._build,c=l._ctor(n,f),h=l._cfg(n,f,i),p=l._mixCust,d=c._yuibuild.dynamic,v,m,g,y,b,w;for(v=0,m=i.length;v<m;v++)g=i[v],y=g.prototype,b=y[s],w=y[o],delete y[s],delete y[o],e.mix(c,g,!0,null,1),p(c,g,h),b&&(y[s]=b),w&&(y[o]=w),c._yuibuild.exts.push(g);return u&&e.mix(c.prototype,u,!0),a&&(e.mix(c,l._clean(a,h),!0),p(c,a,h)),c.prototype.hasImpl=l._impl,d&&(c.NAME=t,c.prototype.constructor=c,c.modifyAttrs=n.modifyAttrs),c},a=r._build,e.mix(a,{_mixCust:function(t,n,r){var s,o,u,a,f,l;r&&(s=r.aggregates,o=r.custom,u=r.statics),u&&e.mix(t,n,!0,u);if(s)for(l=0,f=s.length;l<f;l++)a=s[l],!t.hasOwnProperty(a)&&n.hasOwnProperty(a)&&(t[a]=i.isArray(n[a])?[]:{}),e.aggregate(t,n,!0,[a]);if(o)for(l in o)o.hasOwnProperty(l)&&o[l](l,t,n)},_tmpl:function(t){function n(){n.superclass.constructor.apply(this,arguments)}return e.extend(n,t),n},_impl:function(e){var t=this._getClasses(),n,r,i,s,o,u;for(n=0,r=t.length;n<r;n++){i=t[n];if(i._yuibuild){s=i._yuibuild.exts,o=s.length;for(u=0;u<o;u++)if(s[u]===e)return!0}}return!1},_ctor:function(e,t){var n=t&&!1===t.dynamic?!1:!0,r=n?a._tmpl(e):e,i=r._yuibuild;return i||(i=r._yuibuild={}),i.id=i.id||null,i.exts=i.exts||[],i.dynamic=n,r},_cfg:function(t,n,r){var i=[],s={},o=[],u,a=n&&n.aggregates,f=n&&n.custom,l=n&&n.statics,c=t,h,p;while(c&&c.prototype)u=c._buildCfg,u&&(u.aggregates&&(i=i.concat(u.aggregates)),u.custom&&e.mix(s,u.custom,!0),u.statics&&(o=o.concat(u.statics))),c=c.superclass?c.superclass.constructor:null;if(r)for(h=0,p=r.length;h<p;h++)c=r[h],u=c._buildCfg,u&&(u.aggregates&&(i=i.concat(u.aggregates)),u.custom&&e.mix(s,u.custom,!0),u.statics&&(o=o.concat(u.statics)));return a&&(i=i.concat(a)),f&&e.mix(s,n.cfgBuild,!0),l&&(o=o.concat(l)),{aggregates:i,custom:s,statics:o}},_clean:function(t,n){var r,i,s,o=e.merge(t),u=n.aggregates,a=n.custom;for(r in a)o.hasOwnProperty(r)&&delete o[r];for(i=0,s=u.length;i<s;i++)r=u[i],o.hasOwnProperty(r)&&delete o[r];return o}}),r.build=function(e,t,n,r){return a(e,t,n,null,null,r)},r.create=function(e,t,n,r,i){return a(e,t,n,r,i)},r.mix=function(e,t){return e._CACHED_CLASS_DATA&&(e._CACHED_CLASS_DATA=null),a(null,e,t,null,null,{dynamic:!1})},n._buildCfg={aggregates:u.concat(),custom:{ATTRS:c,_ATTR_CFG:l,_NON_ATTRS_CFG:f}},r._buildCfg={aggregates:u.concat(),custom:{ATTRS:c,_ATTR_CFG:l,_NON_ATTRS_CFG:f}}},"3.12.0",{requires:["base-base"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-stdmod",function(e,t){function H(e){}var n=e.Lang,r=e.Node,i=e.UA,s=e.Widget,o="",u="hd",a="bd",f="ft",l="header",c="body",h="footer",p="fillHeight",d="stdmod",v="Node",m="Content",g="firstChild",y="childNodes",b="ownerDocument",w="contentBox",E="height",S="offsetHeight",x="auto",T="headerContentChange",N="bodyContentChange",C="footerContentChange",k="fillHeightChange",L="heightChange",A="contentUpdate",O="renderUI",M="bindUI",_="syncUI",D="_applyParsedConfig",P=e.Widget.UI_SRC;H.HEADER=l,H.BODY=c,H.FOOTER=h,H.AFTER="after",H.BEFORE="before",H.REPLACE="replace";var B=H.HEADER,j=H.BODY,F=H.FOOTER,I=B+m,q=F+m,R=j+m;H.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:H.BODY,validator:function(e){return this._validateFillHeight(e)}}},H.HTML_PARSER={headerContent:function(e){return this._parseStdModHTML(B)},bodyContent:function(e){return this._parseStdModHTML(j)},footerContent:function(e){return this._parseStdModHTML(F)}},H.SECTION_CLASS_NAMES={header:s.getClassName(u),body:s.getClassName(a),footer:s.getClassName(f)},H.TEMPLATES={header:'<div class="'+H.SECTION_CLASS_NAMES[B]+'"></div>',body:'<div class="'+H.SECTION_CLASS_NAMES[j]+'"></div>',footer:'<div class="'+H.SECTION_CLASS_NAMES[F]+'"></div>'},H.prototype={initializer:function(){this._stdModNode=this.get(w),e.before(this._renderUIStdMod,this,O),e.before(this._bindUIStdMod,this,M),e.before(this._syncUIStdMod,this,_)},_syncUIStdMod:function(){var e=this._stdModParsed;(!e||!e[I])&&this._uiSetStdMod(B,this.get(I)),(!e||!e[R])&&this._uiSetStdMod(j,this.get(R)),(!e||!e[q])&&this._uiSetStdMod(F,this.get(q)),this._uiSetFillHeight(this.get(p))},_renderUIStdMod:function(){this._stdModNode.addClass(s.getClassName(d)),this._renderStdModSections(),this.after(T,this._afterHeaderChange),this.after(N,this._afterBodyChange),this.after(C,this._afterFooterChange)},_renderStdModSections:function(){n.isValue(this.get(I))&&this._renderStdMod(B),n.isValue(this.get(R))&&this._renderStdMod(j),n.isValue(this.get(q))&&this._renderStdMod(F)},_bindUIStdMod:function(){this.after(k,this._afterFillHeightChange),this.after(L,this._fillHeight),this.after(A,this._fillHeight)},_afterHeaderChange:function(e){e.src!==P&&this._uiSetStdMod(B,e.newVal,e.stdModPosition)},_afterBodyChange:function(e){e.src!==P&&this._uiSetStdMod(j,e.newVal,e.stdModPosition)},_afterFooterChange:function(e){e.src!==P&&this._uiSetStdMod(F,e.newVal,e.stdModPosition)},_afterFillHeightChange:function(e){this._uiSetFillHeight(e.newVal)},_validateFillHeight:function(e){return!e||e==H.BODY||e==H.HEADER||e==H.FOOTER},_uiSetFillHeight:function(e){var t=this.getStdModNode(e),n=this._currFillNode;n&&t!==n&&n.setStyle(E,o),t&&(this._currFillNode=t),this._fillHeight()},_fillHeight:function(){if(this.get(p)){var e=this.get(E);e!=o&&e!=x&&this.fillHeight(this.getStdModNode(this.get(p)))}},_uiSetStdMod:function(e,t,r){if(n.isValue(t)){var i=this.getStdModNode(e,!0);this._addStdModContent(i,t,r),this.set(e+m,this._getStdModContent(e),{src:P})}else this._eraseStdMod(e);this.fire(A)},_renderStdMod:function(e){var t=this.get(w),n=this._findStdModSection(e);return n||(n=this._getStdModTemplate(e)),this._insertStdModSection(t,e,n),this[e+v]=n,this[e+v]},_eraseStdMod:function(e){var t=this.getStdModNode(e);t&&(t.remove(!0),delete this[e+v])},_insertStdModSection:function(e,t,n){var r=e.get(g);if(t===F||!r)e.appendChild(n);else if(t===B)e.insertBefore(n,r);else{var i=this[F+v];i?e.insertBefore(n,i):e.appendChild(n)}},_getStdModTemplate:function(e){return r.create(H.TEMPLATES[e],this._stdModNode.get(b))},_addStdModContent:function(e,t,n){switch(n){case H.BEFORE:n=0;break;case H.AFTER:n=undefined;break;default:n=H.REPLACE}e.insert(t,n)},_getPreciseHeight:function(e){var t=e?e.get(S):0,n="getBoundingClientRect";if(e&&e.hasMethod(n)){var r=e.invoke(n);r&&(t=r.bottom-r.top)}return t},_findStdModSection:function(e){return this.get(w).one("> ."+H.SECTION_CLASS_NAMES[e])},_parseStdModHTML:function(t){var n=this._findStdModSection(t);return n?(this._stdModParsed||(this._stdModParsed={},e.before(this._applyStdModParsedConfig,this,D)),this._stdModParsed[t+m]=1,n.get("innerHTML")):null},_applyStdModParsedConfig:function(e,t,n){var r=this._stdModParsed;r&&(r[I]=!(I in t)&&I in r,r[R]=!(R in t)&&R in r,r[q]=!(q in t)&&q in r)},_getStdModContent:function(e){return this[e+v]?this[e+v].get(y):null},setStdModContent:function(e,t,n){this.set(e+m,t,{stdModPosition:n})},getStdModNode:function(e,t){var n=this[e+v]||null;return!n&&t&&(n=this._renderStdMod(e)),n},fillHeight:function(e){if(e){var t=this.get(w),r=[this.headerNode,this.bodyNode,this.footerNode],s,o,u=0,a=0,f=!1;for(var l=0,c=r.length;l<c;l++)s=r[l],s&&(s!==e?u+=this._getPreciseHeight(s):f=!0);f&&((i.ie||i.opera)&&e.set(S,0),o=t.get(S)-parseInt(t.getComputedStyle("paddingTop"),10)-parseInt(t.getComputedStyle("paddingBottom"),10)-parseInt(t.getComputedStyle("borderBottomWidth"),10)-parseInt(t.getComputedStyle("borderTopWidth"),10),n.isNumber(o)&&(a=o-u,a>=0&&e.set(S,a)))}}},e.WidgetStdMod=H},"3.12.0",{requires:["base-build","widget"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position",function(e,t){function d(e){}var n=e.Lang,r=e.Widget,i="xy",s="position",o="positioned",u="boundingBox",a="relative",f="renderUI",l="bindUI",c="syncUI",h=r.UI_SRC,p="xyChange";d.ATTRS={x:{setter:function(e){this._setX(e)},getter:function(){return this._getX()},lazyAdd:!1},y:{setter:function(e){this._setY(e)},getter:function(){return this._getY()},lazyAdd:!1},xy:{value:[0,0],validator:function(e){return this._validateXY(e)}}},d.POSITIONED_CLASS_NAME=r.getClassName(o),d.prototype={initializer:function(){this._posNode=this.get(u),e.after(this._renderUIPosition,this,f),e.after(this._syncUIPosition,this,c),e.after(this._bindUIPosition,this,l)},_renderUIPosition:function(){this._posNode.addClass(d.POSITIONED_CLASS_NAME)},_syncUIPosition:function(){var e=this._posNode;e.getStyle(s)===a&&this.syncXY(),this._uiSetXY(this.get(i))},_bindUIPosition:function(){this.after(p,this._afterXYChange)},move:function(){var e=arguments,t=n.isArray(e[0])?e[0]:[e[0],e[1]];this.set(i,t)},syncXY:function(){this.set(i,this._posNode.getXY(),{src:h})},_validateXY:function(e){return n.isArray(e)&&n.isNumber(e[0])&&n.isNumber(e[1])},_setX:function(e){this.set(i,[e,this.get(i)[1]])},_setY:function(e){this.set(i,[this.get(i)[0],e])},_getX:function(){return this.get(i)[0]},_getY:function(){return this.get(i)[1]},_afterXYChange:function(e){e.src!=h&&this._uiSetXY(e.newVal)},_uiSetXY:function(e){this._posNode.setXY(e)}},e.WidgetPosition=d},"3.12.0",{requires:["base-build","node-screen","widget"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position-align",function(e,t){function c(e){}var n=e.Lang,r="align",i="alignOn",s="visible",o="boundingBox",u="offsetWidth",a="offsetHeight",f="region",l="viewportRegion";c.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:e.Lang.isArray}},c.TL="tl",c.TR="tr",c.BL="bl",c.BR="br",c.TC="tc",c.RC="rc",c.BC="bc",c.LC="lc",c.CC="cc",c.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"),e.after(this._bindUIPosAlign,this,"bindUI"),e.after(this._syncUIPosAlign,this,"syncUI")},_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange),this.after("alignOnChange",this._afterAlignOnChange),this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var e=this.get(r);this._uiSetVisiblePosAlign(this.get(s)),e&&this._uiSetAlign(e.node,e.points)},align:function(e,t){return arguments.length?this.set(r,{node:e,points:t}):this._syncUIPosAlign(),this},centered:function(e){return this.align(e,[c.CC,c.CC])},_setAlignCenter:function(e){return e&&this.set(r,{node:e===!0?null:e,points:[c.CC,c.CC]}),e},_uiSetAlign:function(t,r){if(!n.isArray(r)||r.length!==2){e.error("align: Invalid Points Arguments");return}var i=this._getRegion(t),s,o,u;if(!i)return;s=r[0],o=r[1];switch(o){case c.TL:u=[i.left,i.top];break;case c.TR:u=[i.right,i.top];break;case c.BL:u=[i.left,i.bottom];break;case c.BR:u=[i.right,i.bottom];break;case c.TC:u=[i.left+Math.floor(i.width/2),i.top];break;case c.BC:u=[i.left+Math.floor(i.width/2),i.bottom];break;case c.LC:u=[i.left,i.top+Math.floor(i.height/2)];break;case c.RC:u=[i.right,i.top+Math.floor(i.height/2)];break;case c.CC:u=[i.left+Math.floor(i.width/2),i.top+Math.floor(i.height/2)];break;default:}u&&this._doAlign(s,u[0],u[1])},_uiSetVisiblePosAlign:function(e){e?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(this._posAlignUIHandles)return;var t=this.get(o),n=e.bind(this._syncUIPosAlign,this),r=[];e.Array.each(this.get(i),function(i){var s=i.eventName,o=e.one(i.node)||t;s&&r.push(o.on(s,n))}),this._posAlignUIHandles=r},_detachPosAlignUIHandles:function(){var t=this._posAlignUIHandles;t&&((new e.EventHandle(t)).detach(),this._posAlignUIHandles=null)},_doAlign:function(e,t,n){var r=this._posNode,i;switch(e){case c.TL:i=[t,n];break;case c.TR:i=[t-r.get(u),n];break;case c.BL:i=[t,n-r.get(a)];break;case c.BR:i=[t-r.get(u),n-r.get(a)];break;case c.TC:i=[t-r.get(u)/2,n];break;case c.BC:i=[t-r.get(u)/2,n-r.get(a)];break;case c.LC:i=[t,n-r.get(a)/2];break;case c.RC:i=[t-r.get(u),n-r.get(a)/2];break;case c.CC:i=[t-r.get(u)/2,n-r.get(a)/2];break;default:}i&&this.move(i)},_getRegion:function(t){var n;return t?(t=e.Node.one(t),t&&(n=t.get(f))):n=this._posNode.get(l),n},_afterAlignChange:function(e){var t=e.newVal;t&&this._uiSetAlign(t.node,t.points)},_afterAlignOnChange:function(e){this._detachPosAlignUIHandles(),this.get(s)&&this._attachPosAlignUIHandles()}},e.WidgetPositionAlign=c},"3.12.0",{requires:["widget-position"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-stack",function(e,t){function O(e){}var n=e.Lang,r=e.UA,i=e.Node,s=e.Widget,o="zIndex",u="shim",a="visible",f="boundingBox",l="renderUI",c="bindUI",h="syncUI",p="offsetWidth",d="offsetHeight",v="parentNode",m="firstChild",g="ownerDocument",y="width",b="height",w="px",E="shimdeferred",S="shimresize",x="visibleChange",T="widthChange",N="heightChange",C="shimChange",k="zIndexChange",L="contentUpdate",A="stacked";O.ATTRS={shim:{value:r.ie==6},zIndex:{value:0,setter:"_setZIndex"}},O.HTML_PARSER={zIndex:function(e){return this._parseZIndex(e)}},O.SHIM_CLASS_NAME=s.getClassName(u),O.STACKED_CLASS_NAME=s.getClassName(A),O.SHIM_TEMPLATE='<iframe class="'+O.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>',O.prototype={initializer:function(){this._stackNode=this.get(f),this._stackHandles={},e.after(this._renderUIStack,this,l),e.after(this._syncUIStack,this,h),e.after(this._bindUIStack,this,c)},_syncUIStack:function(){this._uiSetShim(this.get(u)),this._uiSetZIndex(this.get(o))},_bindUIStack:function(){this.after(C,this._afterShimChange),this.after(k,this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(O.STACKED_CLASS_NAME)},_parseZIndex:function(e){var t;return!e.inDoc()||e.getStyle("position")==="static"?t="auto":t=e.getComputedStyle("zIndex"),t==="auto"?null:t},_setZIndex:function(e){return n.isString(e)&&(e=parseInt(e,10)),n.isNumber(e)||(e=0),e},_afterShimChange:function(e){this._uiSetShim(e.newVal)},_afterZIndexChange:function(e){this._uiSetZIndex(e.newVal)},_uiSetZIndex:function(e){this._stackNode.setStyle(o,e)},_uiSetShim:function(e){e?(this.get(a)?this._renderShim():this._renderShimDeferred(),r.ie==6&&this._addShimResizeHandlers()):this._destroyShim()},_renderShimDeferred:function(){this._stackHandles[E]=this._stackHandles[E]||[];var e=this._stackHandles[E],t=function(e){e.newVal&&this._renderShim()};e.push(this.on(x,t))},_addShimResizeHandlers:function(){this._stackHandles[S]=this._stackHandles[S]||[];var e=this.sizeShim,t=this._stackHandles[S];t.push(this.after(x,e)),t.push(this.after(T,e)),t.push(this.after(N,e)),t.push(this.after(L,e))},_detachStackHandles:function(e){var t=this._stackHandles[e],n;if(t&&t.length>0)while(n=t.pop())n.detach()},_renderShim:function(){var e=this._shimNode,t=this._stackNode;e||(e=this._shimNode=this._getShimTemplate(),t.insertBefore(e,t.get(m)),this._detachStackHandles(E),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get(v).removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles(E),this._detachStackHandles(S))},sizeShim:function(){var e=this._shimNode,t=this._stackNode;e&&r.ie===6&&this.get(a)&&(e.setStyle(y,t.get(p)+w),e.setStyle(b,t.get(d)+w))},_getShimTemplate:function(){return i.create(O.SHIM_TEMPLATE,this._stackNode.get(g))}},e.WidgetStack=O},"3.12.0",{requires:["base-build","widget"],skinnable:!0});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position-constrain",function(e,t){function m(e){}var n="constrain",r="constrain|xyChange",i="constrainChange",s="preventOverlap",o="align",u="",a="bindUI",f="xy",l="x",c="y",h=e.Node,p="viewportRegion",d="region",v;m.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}},v=m._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}},m.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added"),e.after(this._bindUIPosConstrained,this,a)},getConstrainedXY:function(e,t){t=t||this.get(n);var r=this._getRegion(t===!0?null:t),i=this._posNode.get(d);return[this._constrain(e[0],l,i,r),this._constrain(e[1],c,i,r)]},constrain:function(e,t){var r,i,s=t||this.get(n);s&&(r=e||this.get(f),i=this.getConstrainedXY(r,s),(i[0]!==r[0]||i[1]!==r[1])&&this.set(f,i,{constrained:!0}))},_setConstrain:function(e){return e===!0?e:h.one(e)},_constrain:function(e,t,n,r){if(r){this.get(s)&&(e=this._preventOverlap(e,t,n,r));var i=t==l,o=i?r.width:r.height,u=i?n.width:n.height,a=i?r.left:r.top,f=i?r.right-u:r.bottom-u;if(e<a||e>f)u<o?e<a?e=a:e>f&&(e=f):e=a}return e},_preventOverlap:function(e,t,n,r){var i=this.get(o),s=t===l,a,f,c,h,p,d;return i&&i.points&&v[t][i.points.join(u)]&&(f=this._getRegion(i.node),f&&(a=s?n.width:n.height,c=s?f.left:f.top,h=s?f.right:f.bottom,p=s?f.left-r.left:f.top-r.top,d=s?r.right-f.right:r.bottom-f.bottom),e>c?d<a&&p>a&&(e=c-a):p<a&&d>a&&(e=h)),e},_bindUIPosConstrained:function(){this.after(i,this._afterConstrainChange),this._enableConstraints(this.get(n))},_afterConstrainChange:function(e){this._enableConstraints(e.newVal)},_enableConstraints:function(e){e?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on(r,this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(e){e.constrained||(e.newVal=this.getConstrainedXY(e.newVal))},_getRegion:function(e){var t;return e?(e=h.one(e),e&&(t=e.get(d))):t=this._posNode.get(p),t}},e.WidgetPositionConstrain=m},"3.12.0",{requires:["widget-position"]});

/*
YUI 3.12.0 (build 8655935)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("overlay",function(e,t){e.Overlay=e.Base.create("overlay",e.Widget,[e.WidgetStdMod,e.WidgetPosition,e.WidgetStack,e.WidgetPositionAlign,e.WidgetPositionConstrain])},"3.12.0",{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0});

M.add("mt-dialog",function(e){function t(){var e=arguments[0],i=t._instances[e.id];return i instanceof t?(i.setAttrs(e),i):(t._instances[e.id]=this,t.superclass.constructor.apply(this,arguments),this.config=e,this)}var i=e.UA.ie,n=6===i,l=e.Lang.isString,s=e.Lang.isNumber,o=e.mt.util,a=e.mt.macro.key,d={CLOSE:"close",OPEN:"open"};t._instances={},t.NAME="mt-dialog",t.MASK_ID="mt-overlay-mask",t.IFRAME_ID="mt-overlay-iframe",t.UNDERLAY_CLASS="mt-overlay-underlay",t.OVERLAY_CONTAINER_CLASS="mt-overlay-container",t.TITLE_TPL='<h3 class="head">{title}<span class="close">关闭</span></h3><div class="body"><p class="error" style="display:none">&nbsp;</p>{content}</div>',t.NO_TITLE_TPL='<a class="close no-title" hidefocus="true">关闭</a><div class="body"><p class="error" style="display:none">&nbsp;</p>{content}</div>',t.ATTRS={id:{value:null,writeOnce:!0},width:{value:"420px",setter:"_setWidth"},zIndex:{value:102},align:{value:null},centered:{value:!0},modal:{value:!0},autoHide:{value:!1},title:{value:""},content:{value:""}};var r={initializer:function(){var e=this;e._timer=null,e._dialog=null,e._scrollHandle=null,e._escHandle=null,e.publish("open",{emitFacade:!0,defaultFn:e._defOpenFn}),e.publish("close",{emitFacade:!0,defaultFn:e._defCloseFn}),e._initDialog(),e._bind()},destructor:function(){var i=this,n=e.one(e.config.doc),l=n.one("#"+t.IFRAME_ID),s=n.one("#"+t.MASK_ID);i._dialog.destroy(),i._escHandle.detach(),i._scrollHandle&&i._scrollHandle.detach(),e.one("#"+i.get("id")).destroy(!0),l&&l.destroy(!0),s&&s.destroy(!0),delete t._instances[i.get("id")]},_initDialog:function(){var t=this,i=t.getAttrs(["width","zIndex","align","centered"]);i.visible=!1,t._dialog=new e.Overlay(i),t._initOverlay()},_bind:function(){var t=this;t.on("widthChange",function(e){this._dialog.set("width",e.newVal),t.resizeUnderlay()}),t.on("titleChange",function(e){t._fillTemplate({title:e.newVal})}),t.on("contentChange",function(e){t._fillTemplate({content:e.newVal})}),t.on("centeredChange",function(e){this._dialog.set("centered",e.newVal)}),t.on("alignChange",function(e){this._dialog.set("align",e.newVal)}),t.on("autoHideChange",function(e){e.newVal&&(t._timer=window.setTimeout(function(){t.close()},1e3*parseInt(e.newVal,10)))}),t._escHandle=e.one("body").on("keydown",function(e){e.keyCode===a.ESC&&t._status===d.OPEN&&t.close()}),e.one("#"+t.get("id")).delegate("click",function(){t.close()},".close")},_fillTemplate:function(i){var n,l,s,o=this;i=i||{},n=i.title||o.get("title"),l=i.content||o.get("content"),(n||l)&&(s=n?e.Lang.sub(t.TITLE_TPL,{title:n,content:l}):e.Lang.sub(t.NO_TITLE_TPL,{content:l}),o._dialog.set("bodyContent",'<div class="mt-dialog">'+s+"</div>"),o.get("centered")&&o.set("centered",!0),o.resizeUnderlay())},_initOverlay:function(){var i,l=e.one(document.body),s=this,o=s.get("modal"),a=s.get("zIndex"),d=s.get("id"),r=s._dialog,c=l.one("#"+t.IFRAME_ID),u=l.one("#"+t.MASK_ID);o&&(n&&!c&&(c=e.Node.create('<iframe id="'+t.IFRAME_ID+'"></iframe>'),l.prepend(c)),u||(u=e.Node.create('<div id="'+t.MASK_ID+'"></div>'),c?c.insert(u,"before"):l.prepend(u)),c&&c.setStyles({width:l.get("docWidth"),height:l.get("docHeight"),zIndex:parseInt(a,10)-2,visibility:"hidden"}),u.setStyles({width:l.get("docWidth"),height:l.get("docHeight"),zIndex:parseInt(a,10)-1,visibility:"hidden"})),i=e.Node.create('<div id="'+d+'" class="'+t.OVERLAY_CONTAINER_CLASS+'"></div>'),c?c.insert(i,"after"):l.prepend(i),r.render(i),s._fillTemplate(),i.one("."+t.UNDERLAY_CLASS)||i.get("firstChild").append('<div class="'+t.UNDERLAY_CLASS+'"></div>')},open:function(){var e=this,t=e.get("id");e.fire("open",{id:t})},_defOpenFn:function(){var i=e.one(document),n=i.one("#"+t.IFRAME_ID),l=i.one("#"+t.MASK_ID),s=this,a=s._dialog,r=s.get("centered"),c=s.get("autoHide"),u=e.one(window);n&&n.setStyle("visibility","visible"),l&&l.setStyle("visibility","visible"),a.show(),s._status=d.OPEN,c&&s.set("autoHide",c),r&&(s.set("centered",!0),s._scrollHandle=u.on("scroll",o.throttle(function(){s.set("centered",!0)},100)))},close:function(){var e=this,t=e.get("id");e.fire("close",{id:t})},_defCloseFn:function(){var i=e.one(document.body),n=i.one("#"+t.MASK_ID),l=i.one("#"+t.IFRAME_ID),s=this,o=s.get("modal"),a=s.get("centered"),r=s.get("id"),c=s._dialog,u=i.one("#"+r);c.hide(),s._status=d.CLOSE,o&&(n.setStyle("visibility","hidden"),l&&l.setStyle("visibility","hidden")),a&&s._scrollHandle&&s._scrollHandle.detach(),u&&u.all(".close").each(function(e){e.purge()}),window.clearTimeout(s._timer),s.config.onClose&&s.config.onClose(s)},resizeUnderlay:function(){var l=this,s=l.get("id");if(n||7===i&&"BackCompat"===document.compatMode){var o=e.one("#"+s+" ."+t.UNDERLAY_CLASS);if(!o)return;var a=o.get("parentNode");o.setStyle("width",parseFloat(a.getComputedStyle("width"))+12+"px"),o.setStyle("height",parseFloat(a.getComputedStyle("height"))+12+"px")}},one:function(t){var i=this,n=e.one("#"+i.get("id"));return n.one(t)},all:function(t){var i=this,n=e.one("#"+i.get("id"));return n.all(t)},showError:function(e){var t,i=this;t=i.one(".body > .error"),t.setHTML(e).show()},clearError:function(){var e,t=this;e=t.one(".body > .error"),e.hide()},showResult:function(t,i){var n="350px",l='<div class="result-box result-box--{className} pngfix"><i></i><h5>{title}</h5>{tip}</div>{extra}',s='<div class="result-box result-box--{className} result-box--alert pngfix"><table class="alert-table"><tr><td width="35"><i class="alert-icon"></i></td><td><div class="alert-msg">{tip}</div></td></tr></table></div>',o={tip:{className:"tip",title:"",extra:""},success:{className:"success",title:"操作成功",extra:""},failure:{className:"failure",title:"操作失败",extra:""}};e.mix(t,o[t.type||"success"]),t.tip?t.tip="<p>"+t.tip+"</p>":(t.tip="",t.className+=" no-tip"),this.setAttrs({width:t.width||n,content:e.Lang.sub(i?s:l,t)})},_setWidth:function(e){return l(e)?e:s(e)?e+"px":"420px"}};e.extend(t,e.Base,r),e.mt.Dialog=t},"1.0.0",{requires:["mt-base","overlay","node","base"]});
M.add("www-dialog",function(e){var t=e.io,n=e.Lang.isFunction,i=e.Lang.trim,o=e.Lang.sub,a=e.mt.util,s=a.Cookie,r=e.mt.www,l=r.REG,d=e.mt.Dialog,c=e.mt.FormChecker;e.namespace("mt.www.Dialog"),r.Dialog=e.merge(r.Dialog,{alert:function(t,n){var i,o=e.mt.Dialog,a=o._instances;"string"==typeof t&&(t={tip:t}),t.id="mt-alert-dialog",t.title=n||"",t.type="tip",e.each(a,function(e){"open"===e._status&&(e._needReopen=!0,e.close())}),i=new o(t),i.open(),i.showResult(t,!0),t.autoHide||i.set("autoHide",t.autoHide),t.reload?i.on("close",function(){window.location.reload()}):i.on("close",function(){e.each(a,function(e){e._needReopen&&(e.open(),delete e._needReopen)})})},login:function(i,o){function l(){i.normalTip&&f.one("#J-normal-login-tip").setHTML(i.normalTip).show(),i.mobileTip&&f.one("#J-mobile-login-tip").setHTML(i.mobileTip).show(),i.loginRef&&(p.all("form").each(function(e){e.on("submit",function(){c(i.loginRef,i.expiresDate),e.submit()})}),p.one(".oauth").delegate("click",function(){c(i.loginRef,i.expiresDate)},"a")),p.one(".body").setStyle("height","auto"),o&&o(p)}function c(e,t){t=t||s.getExpiresDate(1,0,0),s.set(g,e,t,"/","."+M.DOMAIN_HOST)}function u(){window._gaq&&window._gaq.push(["_trackEvent","Dialog","view",i.galabel])}var p,f,m="common-login-dialog",g="wwwlr";return 1===arguments.length&&n(arguments[0])&&(o=arguments[0],i={}),e.mix(i,{galabel:"common/login",origin:"dialog"}),p=new d({id:m,title:"登录",width:"360px",content:'<div class="loading-jump--large" style="height:338px;"></div>'}),p.open(),f=e.one("#"+m),u(),e.use("www-tracker",function(){var n="/account/loginsection";i.mobileLogin&&(n+="/mobile"),t(r.tracker.appendTrackingParams(n),{method:"POST",data:{origin:i.origin},on:{success:function(t,n){var i=a.getEvalRes(n);i.status?(p.set("content",i.content),p.one(".body").setStyle("height","338px"),p.set("centered",!0),e.mt.ComponentHub.boot(f,{"login-section":l})):r.Dialog.alert({tip:i.msg,reload:!0})}}})}),p},help:function(){var n,i,o="help-center-dialog";return n=new d({id:o,title:"帮助中心",width:"681px",content:'<div class="loading-jump--large" style="height:365px;"></div>'}),n.open(),i=e.one("#"+o),t("/help/center",{method:"POST",on:{success:function(t,o){var s=a.getEvalRes(o);n.set("content",s.content),i.one(".body").setStyle("height","365px"),n.set("centered",!0),e.mt.ComponentHub.boot(i)}}}),n},Email:{_ID:"email-bind-dialog",tips:{type:"请填写邮箱地址",empty:"请填写邮箱地址",error:"邮箱格式错误，请重新输入"},bind:function(n,i){function o(){function e(e){var t;e.status?(p.after("close",function(){window.location.reload()}),f.activate(e.email,e.url)):(t=o.get("fields").captcha,o.setErrorTip(t,e.msg),g.refresh(l))}var o,l=p.one("form"),d=a.field(l,"email"),u=a.field(l,"captcha");g.bindRefreshEvent(l),o=new c({form:l,fields:{email:{node:d,validateFn:s,typeTip:m.type},captcha:{node:u,validateFn:g.check,typeTip:g.tips.type}},tipClass:c.CLASS_BLOCK_TIP}),l.on("submit",function(o){o.halt();var s;s=n?"/account/bindemail/modify"+(i?"/verified":""):"/account/bindemail",t(s,{method:"POST",form:{id:l},on:{success:function(t,n){var i=a.getEvalRes(n);e(i)},failure:function(){var e={type:"failure",tip:"请求失败，请稍候重试",autoHide:3,reload:!0};r.Dialog.showResult(p,e)}}})})}function s(e){var t=e.get("value");return""===t?m.empty:l.email.test(t)?!1:m.error}var u=e.one("#email-bind-dialog-markup");if(u){var p,f=this,m=f.tips,g=r.Dialog.Captcha;p=new d({id:f._ID,width:"470px",title:"绑定邮箱",content:u.getHTML()}),p.open(),o()}},activate:function(t,n){var i=e.one("#email-activate-dialog-markup");if(i){var a,s=this;a=new d({id:s._ID,width:"470px",title:"绑定邮箱",content:o(i.getHTML(),{email:t,url:n})}),a.open()}}},Password:{tips:{thesamepwd:"当前密码和新密码一致，请重新输入",currentpwd:"请输入当前密码",emptypwd:"请输入新密码",whitespace:"密码中不能包含空格",password:"新密码至少6个字符，最多32个字符",emptypwd2:"请再次输入新密码",password2:"请再次输入密码以确认",notequal:"密码不一致，请重新输入"},set:function(e){this._set(e)},reset:function(e){this._set(e,!0)},_set:function(n,i){function s(){function o(e){g.setHTML(e).show(),r.disableButton(m,!1)}l=b.one("form"),u=a.field(l,"currentpassword"),p=a.field(l,"password"),f=a.field(l,"password2"),m=a.field(l,"commit"),g=l.one(".error"),e.use("www-passwordstrength",function(){p.on("keyup",function(){r.PasswordStrength.check(p.get("value"))})}),w=new c({form:l,fields:{},tipClass:c.CLASS_BLOCK_TIP,async:!0}),i&&w.addField("currentPassword",{node:u,validateFn:v.getCheckMethod(w,0)}),w.addFields({password:{node:p,validateFn:v.getCheckMethod(w,1),typeTip:v.tips.password},password2:{node:f,validateFn:v.getCheckMethod(w,2)}}),w.on("submitSuccess",function(e){e.halt(),r.disableButton(m),h&&h.isInProgress()||(h=t(l.get("action"),{method:"POST",form:{id:l},on:{success:function(e,t){var i,s=a.getEvalRes(t);s.status?(i={type:"success",title:"设置成功！"},s.growth&&s.growth>0&&(i.tip='您已获得<span class="growth-dialog-focus">'+parseInt(s.growth,10)+"个成长值</span>"),b.showResult(i),b.on("close",function(){n.reload?window.location.reload():s.redirect&&(window.location.href=s.redirect)}),b.set("autoHide",3)):o(s.msg)},failure:function(){o("网络故障，请稍后重试")}}}))})}var l,u,p,f,m,g,w,h,b=null,v=this,y=e.one("#J-set-password-dialog-markup"),M={tip:"",currentPasswordField:"",mobileField:""},k="set-password-dialog",T='<div class="field-group"><label>当前密码</label><input type="password" name="currentpassword" id="current-password" class="f-text" autocomplete="off" /></div>',D='<div class="field-group"><label class="text">手机号</label>{mobile}</div>';n=n||{},e.mix(M,n,!0,["tip"]),i?(M.action="/account/settings",M.currentPasswordField=T):(M.action="/account/addpassword",n.mobile&&(M.mobileField=o(D,{mobile:n.mobile}))),b=new d({id:k,width:"400px",title:"设置密码",content:o(y.getHTML(),M)}),b.open(),s()},getCheckMethod:function(e,t){function n(e,t){var n=t||"",i=/\s/,a=/^[\x21-\x7e]{6,32}$/i;switch(n){case"current":if(""===e)return o.currentpwd;break;case"password":if(""===e)return o.emptypwd;if(i.test(e))return o.whitespace;if(!a.test(e))return o.password;break;case"password2":if(""===e)return o.emptypwd2}return!1}var i=e.get("fields"),o=this.tips;switch(t){case 0:return function(e){return n(e.get("value"),"current")};case 1:return function(t){var a,s,r,l=t.get("value");return r=n(l,"password"),r!==!1?r:i.currentPassword&&(a=i.currentPassword.node.get("value"),a===l)?o.thesamepwd:(s=i.password2.node.get("value"),s&&n(s,"password2")===!1&&e.checkField(i.password2),!1)};case 2:return function(e){var t,a,s=e.get("value");return a=n(s,"password2"),a!==!1?a:(t=i.password.node.get("value"),t!==s?o.notequal:!1)};default:return function(){return!1}}}},Mobile:{bind:function(t,n){var i,o=null,a="mobile-bind-dialog";if(!t){if(i=e.one("#mobile-bind-dialog-markup"),!i)return;t=i.getHTML()}o=new d({id:a,width:"450px",title:"绑定手机号码",content:t}),o.open(),n?this.initSmsUpBind(o.one("form"),{dialog:o}):(this.initBinder(o),this.bindEvent(o,{reload:!0}))},rebind:function(t){var n=null,i=e.one("#mobile-rebind-dialog-markup"),o="mobile-rebind-dialog";i&&(n=new d({id:o,width:"480px",title:"更换手机号码",content:i.getHTML()}),n.open(),t?this.initSmsUpRebind(n.one("form"),{dialog:n}):(this.initBinder(n),this.bindEvent(n,{reload:!0})))},twoStepRebind:function(t){function n(){p=r.one("#J-mobile-rebind-step1-form");var e=a.field(p,"oldmobile"),t=a.field(p,"oldverifycode"),n=p.one("#J-old-verify-tip"),o=p.one("#J-help-toggle"),s=p.one("#J-help-content");o&&s&&o.on("click",function(){"none"===s.getStyle("display")?s.show():s.hide()});var l={ndForm:p,ndOldMobile:e,ndOldMsg:"#J-old-mobile-tip",ndVerify:"#J-old-mobile-verify",ndVerifyCode:t,ndVerifyMsg:n,action:"/account/sendold"};u.initBinder(r,l,i)}function i(){u._performVerify({ndForm:p,ndVerifyMsg:p.one("#J-old-verify-tip"),dialog:r,callback:function(){p.hide(),t?(p=r.one("#J-mobile-rebind-step2-form"),p.show(),u.initSmsUpBind(p)):o()}})}function o(){p=r.one("#J-mobile-rebind-step2-form");var e=a.field(p,"mobile"),t=a.field(p,"verifycode"),n=p.one("#J-verify-tip");p.show();var i={ndForm:p,ndMobile:e,ndMsg:"#J-mobile-tip",ndVerify:"#J-mobile-verify",ndVerifyCode:t,ndVerifyMsg:n,action:"/account/sendnew"};u.initBinder(r,i,s)}function s(){u._performVerify({ndForm:p,ndVerifyMsg:p.one("#J-verify-tip"),dialog:r,config:{reload:!0}})}var r=null,l=e.one("#mobile-rebind-2step-dialog-markup"),c="mobile-rebind-2step-dialog",u=this,p=null;l&&(r=new d({id:c,width:"480px",title:"更换手机号码",content:l.getHTML()}),r.open(),n())},unbind:function(){var t,n,i=null,o=e.one("#mobile-unbind-dialog-markup"),a="mobile-unbind-dialog";o&&(i=new d({id:a,width:"420px",title:"解绑手机号码",content:o.getHTML()}),i.open(),t=i.one("form"),n=new c({form:t,fields:{mobile:{node:t.one("#old-mobile"),validateFn:this._check,typeTip:"请输入11位手机号码"}},tipClass:c.CLASS_BLOCK_TIP}),this.bindEvent(i,{reload:!0}))},initBinder:function(t,n,o){e.use("mt-mobilebinder",function(e){var s=n?!0:!1;o=o||null,n=n||{};var r,l,d=n.ndForm||t.one("form"),c=n.ndOldMobile||a.field(d,"oldmobile"),u=n.ndMobile||a.field(d,"mobile"),p=n.ndVerifyCode||a.field(d,"verifycode"),f=n.ndVerifyMsg||d.one("#verify-tip"),m=e.mt.MobileBinder;l=s?n:{ndOldMobile:c,ndOldMsg:"#old-mobile-tip",ndMobile:u,ndMsg:"#mobile-tip",ndVerify:"#mobile-verify",ndVerifyMsg:f},r=new m(l),d.on("submit",function(e){var t=!0;r.check()&&(r.get("status")===m.STATUS_OLD_MOBILE_INVALID?c&&c.focus():r.get("status")===m.STATUS_MOBILE_INVALID&&u&&u.focus(),t=!1),p&&""===i(p.get("value"))&&(r.setMsg(f,"请输入验证码",!0),p.focus(),t=!1),o?(e.halt(!0),t&&o()):t||e.halt(!0)})})},bindEvent:function(e,t){var n=e.one("form"),i=this;n&&(t=t||{},n.on("submit",function(o){o.halt(),i._performVerify({ndForm:n,ndVerifyMsg:n.one("#verify-tip"),config:t,dialog:e})}))},initSmsUpBind:function(n,i){function o(t,n){var o=a.getEvalRes(n),l=e.one("#J-upstream-sms-content"),d=e.one("#J-upstream-sms-receiver");o.status?(h.hide(),b.show(),w.setHTML(o.maskmobile),l.setHTML(o.verifycode),d.setHTML(o.damobile),e.mt.www.Dialog.Mobile.initSmsUpChecker(v,e.merge({successFn:s,failFn:r,failMsg:"您发送的短信暂时无法收到，建议您咨询客服解决",type:"绑定"},i))):y({tip:o.msg,reload:!0})}function s(e){M=m;var t="绑定成功";e.growth&&e.growth>0&&(t='您已获得<span class="growth-dialog-focus">'+parseInt(e.growth,10)+"个成长值</span>"),y({tip:t,reload:!0,autoHide:5})}function r(){M=f}function l(){var e=d.get("value");return""===e?"请输入手机号":/^\d{11}$/.test(e)?(M=p,!1):"请输入正确的11位手机号码"}var d=e.one("#J-smsup-bind-input");if(d){var c,u=1,p=2,f=3,m=4,g=e.one("#J-smsup-bind-next"),w=e.one("#J-smsup-bind-mask"),h=e.one("#J-smsup-bind-step1"),b=e.one("#J-smsup-bind-step2"),v=e.one("#J-smsup-bind-check"),y="undefined"!=typeof e.mt.www.Dialog.alert?e.mt.www.Dialog.alert:window.alert,M=u;i=i||{},n&&n.on("submit",function(e){switch(l(),M){case m:return!0;case u:y("请输入正确的手机号");break;case f:case p:y("您尚未完成手机号码绑定")}return e.halt(),!1}),g.on("click",function(e){if(e.halt(),!c||!c.isInProgress()){var n=l();return n?y(n):void(c=t(g.getData("action"),{method:"POST",data:a.toPostData({mobile:d.get("value")}),on:{success:o}}))}})}},initSmsUpRebind:function(n,i){function o(t,n){var o=a.getEvalRes(n),l=e.one("#J-upstream-sms-content"),d=e.one("#J-upstream-sms-receiver");o.status?(b.hide(),v.show(),h.setHTML(o.maskmobile),l.setHTML(o.verifycode),d.setHTML(o.damobile),e.mt.www.Dialog.Mobile.initSmsUpChecker(y,e.merge({successFn:s,failFn:r,failMsg:"您发送的短信暂时无法收到，建议您咨询客服解决",type:"绑定"},i))):M({tip:o.msg,reload:!0})}function s(e){k=g;var t="绑定成功";e.growth&&e.growth>0&&(t='您已获得<span class="growth-dialog-focus">'+parseInt(e.growth,10)+"个成长值</span>"),M({tip:t,reload:!0,autoHide:5})}function r(){k=m}function l(){var e=d.get("value"),t=c.get("value");return""===t?"请输入原手机号":""===e?"请输入新手机号":/^\d{11}$/.test(e)&&/^\d{11}$/.test(t)?t===e?"新手机号不能和原手机号相同":(k=f,!1):"请输入正确的11位手机号码"}var d=e.one("#J-smsup-bind-input"),c=e.one("#J-smsup-bind-input-old");if(d&&c){var u,p=1,f=2,m=3,g=4,w=e.one("#J-smsup-bind-next"),h=e.one("#J-smsup-bind-mask"),b=e.one("#J-smsup-bind-step1"),v=e.one("#J-smsup-bind-step2"),y=e.one("#J-smsup-bind-check"),M="undefined"!=typeof e.mt.www.Dialog.alert?e.mt.www.Dialog.alert:window.alert,k=p;i=i||{},n&&n.on("submit",function(e){switch(l(),k){case g:return!0;case p:M("请输入正确的手机号");break;case m:case f:M("您尚未完成手机号码绑定")}return e.halt(),!1}),w.on("click",function(e){if(e.halt(),!u||!u.isInProgress()){var n=l();return n?M(n):void(u=t(w.getData("action"),{method:"POST",data:a.toPostData({mobile:d.get("value"),oldmobile:c.get("value")}),on:{success:o}}))}})}},initSmsUpChecker:function(n,i){function o(){!h&&f?(f%p===0&&r(),n.set("value","系统将在("+f+"秒)内完成"+c)):(window.clearInterval(l),h||r(s)),f-=1}function s(){h||(m(i.failMsg),f=u,n.set("value",c+"失败，请重发短信后再次确认").set("disabled",!1).removeClass(g))}function r(e){d=t(w,{method:"POST",data:a.toPostData(i.data),on:{success:function(t,n){var o=a.getEvalRes(n);o.status=parseInt(o.status,10),0===o.status?(h=!0,i.successFn&&i.successFn(o)):1===o.status?m({tip:o.msg,reload:!0}):(h=!1,i.failFn&&i.failFn(o)),e&&e(o)},failure:function(){m("网络异常，请重试"),n.set("disabled",!1).removeClass(g)}}})}if(n=e.one(n)){var l,d,c,u=60,p=10,f=u,m="undefined"!=typeof e.mt.www.Dialog.alert?e.mt.www.Dialog.alert:window.alert,g="btn-disabled",w=n.getData("action"),h=!1,b={successFn:function(){},failFn:function(){},type:"注册",failMsg:""};i=e.merge(b,i),c=i.type,n.on("click",function(){n.addClass(g).set("disabled",!0).set("value","系统将在("+f+")内完成"+c),o(),l=window.setInterval(o,1e3)}),i.dialog&&i.dialog.on&&i.dialog.on("close",function(){l&&window.clearInterval(l)})}},_performVerify:function(e){if(e.ndForm){var n=e.config||{},i=e.ndForm.one('input[type="submit"]'),o=e.ndVerifyMsg||null,s="error";r.disableButton(i,!0),o&&(o.removeClass(s),o.setHTML("")),t(e.ndForm.get("action"),{method:"POST",form:{id:e.ndForm},on:{success:function(t,l){var d,c=a.getEvalRes(l);c.status?e.callback?e.callback(c):(n.type=c.status?"success":"failure",d=c.msg,c.growth&&c.growth>0&&(d='您已获得<span class="growth-dialog-focus">'+parseInt(c.growth,10)+"个成长值</span>"),n.tip=d,n.autoHide=2,r.Dialog.showResult(e.dialog,n)):(r.disableButton(i,!1),o?(o.addClass(s),o.setHTML(c.msg)):r.Dialog.alert(c.msg))},failure:function(){r.disableButton(i,!1)}}})}},_check:function(e){return/^\d{11}$/.test(e.get("value"))?!1:"请输入正确的11位手机号码"}},Captcha:{tips:{type:"请输入图片中的字符，不区分大小写",empty:"请输入验证码",error:"验证码输入错误，请重新输入"},bindRefreshEvent:function(e){if(e){var t=e.one(".captcha-refresh"),n=e.one(".signup-captcha-img"),i=this;t&&n&&e.delegate("click",function(t){t.halt(),i.refresh(e)},".signup-captcha-img, .captcha-refresh")}},refresh:function(e){var t=e.one(".signup-captcha-img"),n=t.getAttribute("src").replace(/(\?0\.\d+)?$/,"");t.setAttribute("src",n+"?"+Math.random())},check:function(e){var t=e.get("value"),n=r.Dialog.Captcha.tips;return""===t?n.empty:4!==t.length?n.error:!1}},showResult:function(e,t){t=t||{},t.title||(t.title="success"===t.type?"操作成功":"操作失败"),e.showResult(t),void 0!==t.autoHide&&e.set("autoHide",t.autoHide),t.reload&&e.after("close",function(){window.location.reload()}),t.onClose&&e.after("close",function(){t.onClose(e)})},createResultDialog:function(e,t,n){n=n||"MT_SHOW_RESULT_DIALOG";var i=new d({id:n,title:t||""});i.open(),this.showResult(i,e)}})},"1.0.0",{requires:["www-base","mt-formchecker","mt-dialog"]});
M.add("www-misc",function(e){var t=e.Node,i=e.io,n=e.UA.ie,o=e.UA.gecko,a=e.Lang.isFunction,l=e.Lang.trim,c=e.mt.util,s=e.mt.www,r=e.mt.Dialog,d=e.mt.www.REG,u=e.mt.FormChecker;e.mt.www.Vote={init:function(){var t=e.one(".vote-list");t.delegate("click",function(){var t=c.data(this,"sid"),i=e.one("#"+t);if(i){var n=this.get("type"),o=this.get("value"),a=c.data(i,"cid"),l="checkbox"===n&&this.get("checked"),s="radio"===n&&o===a;l||s?i.set("disabled",!1).removeClass("disabled").focus():i.set("disabled",!0).addClass("disabled")}},"input")}},e.mt.www.Survey={init:function(t){function i(){var t=c.data(this,"sid"),i=e.one("#"+t),n=this.ancestor(".J-survey-item"),o=c.data(n,"type");if(!i)return void("0"===o&&n.one(".J-other-choice")&&n.one(".J-other-choice").hide());var a=this.get("type"),l=this.get("value"),s=c.data(i,"cid"),r="checkbox"===a&&this.get("checked"),d="radio"===a&&l===s;r||d?(i.ancestor("tr").show(),i.set("disabled",!1).removeClass("disabled").focus()):(i.ancestor("tr").hide(),i.set("disabled",!0).addClass("disabled"))}function n(t){var i=this.hasClass("J-survey-item")?this:this.ancestor(".J-survey-item"),n=c.data(i,"minselection"),o=c.data(i,"maxselection"),a=c.data(i,"type"),r=c.data(i,"title"),d=i.all("input"),u=i.one("textarea"),f=0;return"2"===a?n>0&&u&&!u.get("value")?(t&&t.halt(!0),l.tip=r+"为必填项",s.Dialog.alert(l),!1):!0:(e.each(d,function(e){return"hidden"===e.get("type")?!1:void(e.get("checked")&&f++)}),n>f?(t&&t.halt(!0),l.tip=r+"至少选"+n+"项",s.Dialog.alert(l),!1):99>o&&f>o?(t&&t.halt(!0),l.tip=r+"至多选"+o+"项",s.Dialog.alert(l),!1):!0)}var o=e.one("#J-survey-list"),a=e.one("#J-survey-form"),l={width:300,autoHide:5,tip:""};t&&(l.tip="抱歉，问卷提交失败，请重新填写",s.Dialog.alert(l)),o&&(o.delegate("click",i,"input"),a.on("submit",function(t){var i=e.all(".J-survey-item"),o=!0;e.some(i,function(e){return n.call(e)?void 0:(o=!1,!0)}),o||t.halt(!0)}))}},e.mt.www.Miaosha={toggle:function(t,i,n,o){var a=e.one(t),l=a.all(i),c=e.all(n),s=c.item(o),r=l.item(o),d="current",u="hover";s.setStyle("display","block"),r.addClass(d),a.delegate("click",function(){var e=l.indexOf(this),t=c.item(e);c.setStyle("display","none"),t.setStyle("display","block"),l.removeClass(d),this.addClass(d)},i),a.delegate("mouseover",function(){this.addClass(u)},i),a.delegate("mouseout",function(){this.removeClass(u)},i)}},e.mt.www.InitialPage={changeCity:function(t){var i=e.one(t);i&&(e.Global.on("AutoComplete.select",function(e){e.data.firstalpha&&(window._gaq.push(["_trackEvent","InnerLink","Click","changecity/search/"+e.data.firstalpha]),window.setTimeout(function(){window.location.href="http://"+e.data.firstalpha+"."+c.data(i,"domain")},200))}),i.on("submit",function(e){e.halt();var t=c.field(i,"city"),n=t.get("value");return"-1"===n?void s.Dialog.alert("请选择城市"):void(window.location.href="http://"+n+"."+c.data(i,"domain"))}))},selectCity:function(t){var i=e.one(t);i&&(i.delegate("mouseover",function(){this.addClass("hover")},"li"),i.delegate("mouseout",function(){this.removeClass("hover")},"li"))}},e.mt.www.Lottery={wordCountTip:function(t,i,o,l){if(t=e.one(t),i=e.one(i),t&&i){var c,s=null,r={display:"",callback:function(e){return o>=e?(i.set("innerHTML",e===o?"已达字数上限":"剩余<b>"+(o-e)+"</b>字"),i.set("className",l.styleExceed||"word-count-unexceed"),!1):(i.set("innerHTML","超出<b>"+(e-o)+"</b>字"),i.set("className",l.styleUnexceed||"word-count-exceed"),!0)}};e.mix(l,r),a(l.callback)&&(t.on("focus",function(){i.setStyle("display",l.display),n?c=l.callback(t.get("value").length,o,t,i):s=window.setInterval(function(){c=l.callback(t.get("value").length,o,t,i)},100)}),n&&t.on("keyup",function(){c=l.callback(t.get("value").length,t,i)}),t.on("blur",function(){c||i.setStyle("display","none"),s&&window.clearInterval(s)}))}},lotterySina:function(t){if(t=e.one(t)){var i=100,n=t.get("comment"),o=t.one(".counttip .tip");this.wordCountTip(n,o,i,{callback:function(e){return i>=e?o.set("innerHTML","还可以输入<strong>"+(i-e)+"</strong>字"):o.set("innerHTML",'已经超出<strong class="exceed">'+(e-i)+"</strong>字"),!0}}),t.on("submit",function(e){e.halt();var t=n.get("value").length;t>0&&i>=t&&this.submit()})}},followMeituan:function(t){var i,n,o=e.one("#follow-meituan"),a=e.one("#bind-form");a&&t&&a.delegate("click",function(e){n=e.target.get("id"),"follow-meituan"===n?(i=o.get("checked"),i||window.confirm("如果取消关注或收听美团，将不会多得到一个抽奖号")||o.set("checked",!0)):(e.halt(),"bind-sina"===n?a.set("action","/lottery/bindsina/"+t):"bind-tx"===n&&a.set("action","/lottery/bindtencent/"+t),a.submit())},"#bind-sina, #bind-tx, #follow-meituan")},addFavorite:function(t,a){function l(){function t(){i("/lottery/addfavorites/"+w,{method:"POST",on:{success:function(t,i){var a=c.getEvalRes(i);a.status?n||o?window.location.href=v:window.setTimeout(function(){window.location.href=v},3e3):(e.use("www-tips",function(e){e.mt.www.SysMsg.show("error",a.msg)}),window.scrollTo(0,0))},failure:function(){}}})}if(r)try{window.external.addFavorite(d,u),t()}catch(a){try{window.sidebar.addPanel(u,d,""),t()}catch(l){s.Dialog.alert(m),t()}}}var r=e.one("#add-favorite-button"),d="http://www.meituan.com/?utm_campaign=lottery&utm_source=favourites&utm_medium=free&utm_content="+t,u="美团网-美团一次 美一次",f=-1!==window.navigator.userAgent.toLowerCase().indexOf("mac")?"Command":"Ctrl",m="抱歉，您的浏览器不支持此操作。\n请使用按键 "+f+"+D 收藏美团。",w=a.slice(a.lastIndexOf("/")+1),v=a+"/empty/#summary";r&&r.on("click",l)},confirmUnlisten:function(){var t=e.one("#bind-tencent");t&&t.on("click",function(){var e=t.get("checked");e||window.confirm("若取消收听美团，将不会得到额外的一个抽奖号")||t.set("checked",!0)})}},e.mt.www.Job={checkDefault:function(t){var i=e.one(t);i&&i.on("submit",function(e){e.halt();var t=c.field(i,"city").get("value"),n=c.field(i,"department").get("value");"-1"===t&&"0"===n?s.Dialog.alert("请选择工作城市或职位类别"):i.submit()})}},e.mt.www.Cpc={init:function(t){if(t=e.one(t)){var i=c.field(t,"email"),n=c.field(t,"password"),o=c.field(t,"captcha"),a="";s.refreshCaptcha(t),t.on("submit",function(e){return e.halt(),i.get("value")===a?void s.Dialog.alert("邮箱不能为空"):n.get("value")===a?void s.Dialog.alert("密码不能为空"):o.get("value")===a?void s.Dialog.alert("请输入验证码"):void this.submit()})}}},e.mt.www.Feedback={init:function(t){function i(e){var t=e.get("value");if(""===t){var i=c.data(e,"tips")||"您有未填写的项目";return i}return!1}function n(e){var t=e.get("value");if("-1"===t){var i=c.data(e,"tips")||"您有未填写的项目";return i}return!1}if(t=e.one(t)){var o,a,l=c.field(t,"name"),s=c.field(t,"email"),r=c.field(t,"contact"),d=c.field(t,"mobile"),f=c.field(t,"locationprovince"),m=c.field(t,"locationcity"),w=c.field(t,"locationdistrict"),v=c.field(t,"content"),g=c.field(t,"bizname"),h=c.field(t,"commit"),p=e.one("#feedback-tip-group"),b=e.one(".type-group");r&&r.plug(e.mt.plugin.Placeholder),s&&s.plug(e.mt.plugin.Placeholder),p&&(o=p.all("> li")),a=new u({form:t,fields:{name:{node:l,validateFn:i,typeTip:""},mobile:{node:d,validateFn:i,typeTip:""},locationprovince:{node:f,validateFn:n,typeTip:""},locationcity:{node:m,validateFn:n,typeTip:""},locationdistrict:{node:w,validateFn:n,typeTip:""},bizname:{node:g,validateFn:i,typeTip:""},content:{node:v,validateFn:i,typeTip:""}},checkEvent:"blur",tipClass:u.CLASS_BLOCK_TIP}),t.on("submit",function(){h.set("disabled",!0)}),b&&b.delegate("click",function(e){var t,i=parseInt(c.data(e.target,"index"),10),n=s.previous("label");if(o)for(var a=o.size();a>0;a--)t=o.item(a-1),a===i?t.show():t.hide(),n.setHTML(4===i?"您的邮箱":"联系方式")},"input")}}},e.mt.www.Mobile={slide:function(i,n){function o(e,i){var n,o=t.create('<p id="trigger"></p>'),a=[];for(n=0;i>n;++n)a.push("<span>"+(n+1)+"</span>");return o.setHTML(a.join("")),e.appendChild(o),s=o.all("span")}if(i=e.one(i)){var a=i.all(n),l={animStyle:"fade",triggerEvent:"mouseover",slideEnabled:!0,slideInterval:4e3},c=a.size(),s=o(i,c);e.use("w-tab",function(e){new e.mt.widget.Tab(s,a,l)})}},initDownload:function(){this.mobileSlide("#m-slide"),this.switchMobileTab("#m-tabs"),this.mobileSms()},mobileSlide:function(t){function i(e){e=window.parseInt(e,10),e>r&&(e=0),d!==e&&o(!0,function(){c.getDOMNode().className="banner banner"+e,s.item(d).removeClass("current"),s.item(e).addClass("current"),d=e,o(!1,n)})}function n(){a=window.setTimeout(function(){i(d+1)},6e3),l=null}function o(t,i){l=new e.Anim({node:c,duration:.5,from:{opacity:t?1:0},to:{opacity:t?0:1}}),l.on("end",function(){i()}),l.run()}if(t=e.one(t)){var a,l,c=t.one(".banner"),s=t.all("li"),r=s.size()-1,d=0;n(),t.delegate("click",function(){l&&l.stop(),window.clearTimeout(a),i(this.getAttribute("data-i"))},"li")}},switchMobileTab:function(t){if(t=e.one(t)){var i=6===n?!0:!1,o=t.ancestor(),a=o.getY(),l=!1,s=t.all("a"),r=e.all("#m-contents .item"),d=t.one(".current").getAttribute("data-i"),u=e.one(window),f="current";t.delegate("click",function(e){e.preventDefault();var t=this.getAttribute("data-i");t!==d&&(r.item(d).removeClass(f),r.item(t).addClass(f),i||(window.location.hash="item-"+t),s.item(d).removeClass(f),s.item(t).addClass(f),d=t)},"a"),i||u.on("scroll",c.throttle(function(){u.get("scrollTop")>a?l||(o.addClass("tabs-fixed"),l=!0):l&&(o.removeClass("tabs-fixed"),l=!1)}))}},mobileSms:function(){function t(){var t,l=u.get("action");f.plug(e.mt.plugin.Placeholder),w=s.refreshCaptcha(u,!1),u.on("submit",function(e){e.halt(),o()&&a()&&(t&&t.isInProgress()||(t=i(l,{method:"POST",form:{id:u},on:{success:function(e,t){var i=c.getEvalRes(t);i.status?n(!0):n(!1,i.msg)},failure:function(){}}})))})}function n(e,t){var i,n=5;i=e?{type:"success",title:"短信发送成功！",tip:"短信可能有延迟，请耐心等待"}:{type:"failure",title:"短信发送失败！",tip:t},d.showResult(i),d.set("autoHide",n),d=null}function o(){var e=f.get("value"),t=/^0{0,1}(13[0-9]|15[0-9]|18[0-9])[0-9]{8}$/;return 0===e.length?(s.Dialog.alert("手机号不能为空"),!1):t.test(e)?!0:(s.Dialog.alert("请输入11位手机号码"),!1)}function a(){var e=l(m.get("value")).length;return 0===e?(s.Dialog.alert("验证码不能为空"),!1):4!==e?(s.Dialog.alert("请输入正确的验证码"),!1):!0}var d,u,f,m,w,v="dialog-sms";e.one("#m-contents").delegate("click",function(i){var n=e.one("#dialog-sms-markup");i.halt(),d?(d.open(),w.update()):(d=new r({id:v,width:"420px",content:n.getHTML()}),d.open(),u=d.one("form"),f=c.field(u,"mobile"),m=c.field(u,"captcha"),t())},".sms")}},e.mt.www.Maillist={init:function(t){if(t=e.one(t)){var i=c.field(t,"email");e.mt.www.Account.captchaFocus(t),e.mt.www.Email.autoComplete(i,"#mail-list"),i.focus(),this.checkForm(t)}},checkForm:function(t){function i(e){var t=e.get("value");return""===t?"邮箱不能为空":d.email.test(t)?!1:"邮箱格式错误"}function n(){return"-1"===s.get("value")||"-1"===r.get("value")?"请选择城市":!1}function o(e){var t=e.get("value");return""===t?"验证码不能为空":4!==t.length?"验证码错误":!1}var a,l=c.field(t,"email"),s=c.field(t,"province"),r=c.field(t,"city"),u=c.field(t,"captcha"),f=e.mt.FormChecker;a=new f({form:t,fields:{email:{node:l,validateFn:i,typeTip:"",errorTip:"请输入正确的邮箱"},city:{node:r,validateFn:n,typeTip:""},captcha:{node:u,validateFn:o,typeTip:""}},tipClass:f.CLASS_INLINE_TIP})},countDown:function(t,i){function n(){a>0?(a--,o.set("text",a)):window.location.href=i}var o=e.one(t);if(o){var a=+o.get("text");window.setInterval(n,1e3)}}},e.mt.www.Nodeals={init:function(t){if(t=e.one(t)){var i=c.field(t,"email");e.mt.www.Account.captchaFocus(t),e.mt.www.Email.autoComplete(i,"#nodeal-mail-list"),i.focus(),e.mt.www.Maillist.checkForm(t)}}},e.mt.www.Collection={list:function(){var t=e.one("#collection-list");t&&t.delegate("click",function(t){t.preventDefault(),e.mt.www.Collection.remove(this)},".remove-collection")},remove:function(e){var t,n="确认删除该收藏？",o=e.getAttribute("href");window.confirm(n)&&(t=i(o,{method:"POST",on:{success:function(t,i){var n=c.getEvalRes(i);n.status?e.ancestor("tr").remove():s.Dialog.alert(n.msg)},failure:function(){}}}))}},e.mt.www.Tuijian={initSlider:function(t){t=e.one(t),t&&e.use("w-slider",function(e){new e.mt.widget.Slider({sheetContainer:t,effect:"slideHorizontal",interval:5e3}).render()})}},e.mt.www.Topic={initSuperTues:function(){function t(){var e=new Date,t=s.getTime()-e.getTime(),n=parseInt(t/1e3,10),a=Math.floor(n/60/60/24),c=Math.floor(n/60/60%24),r=Math.floor(n/60%60),d=Math.floor(n%60);i.setHTML(1>a?'距开秒：<span class="time"><strong>'+c+"</strong>小时<strong>"+r+"</strong>分钟<strong>"+d+"</strong>秒</span>":'距开秒还有：<span class="time"><strong>'+(l-o+7)%7+"</strong>天</span>")}var i=e.one(".J-topic-countdown");if(i){var n=new Date,o=n.getDay(),a=n.getHours(),l=2,c=10;if(!(o===l&&a>=c)){i.show();var s,r=0===o?7:o,d=r>l?l+7:l;s=new Date(n.setDate(n.getDate()-r+d)),s.setHours(c,0,0),window.setInterval(function(){t()},1e3)}}},initQrcodeMovie:function(){function t(){var t=e.one(".J-movie-qrcode");t&&e.use("uix-sticky",function(e){new e.mt.uix.Sticky(t,{vMinScrollTop:300,vTopOffset:280,vBottomOffset:68,hAlign:"right",topEdge:".topic-header",bottomEdge:".site-info-w",side:"left",canDisappear:!0,hideWhenTooNarrow:!0}),t.delegate("click",function(e){e.halt(),t.remove(!0)},".close")})}var i=e.one("#bd"),n='<div class="J-movie-qrcode movie-qrocde" style="display:none;"><a class="link" target="_blank" href="http://i.meituan.com/mobile/down/meituan?" gaevent="topic/movie/new/qrcode">   <span class="close"></span></a></div>';i.appendChild(n),t()}},e.mt.www.rising=function(){e.all("a").each(function(e){e.set("target","_blank")})}},"1.0.0",{requires:["www-base","mt-formchecker","mt-form","www-dialog"]});